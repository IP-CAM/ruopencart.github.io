---
layout: ru-ru/default
title: "Разработка каналов продукта - Документация OpenCart"
permalink: ru-ru/developer/product-feed/
---
<h1>Разработка новых каналов продуктов</h1>
<p>OpenCart включает в себя несколько полезных <a href="ru-ru/extension/feed/">Каналов Продуктов</a> в основном, но Вы можете обнаружить, что Вам нужен собственный формат, и решите создать свой собственный. Написание каналов продуктов OpenCart очень похоже на <a href="ru-ru/developer/module/">написание модулей OpenCart</a>, и может быть очень хорошим способом узнать, как <a href="ru-ru/developer/loading/">основы OpenCart</a> действительно работают. Как и остальная часть OpenCart, каналы следуют шаблону проектирования MVCL. Это руководство по документации опишет, как Вы используете каждый из компонентов MVCL для создания <a href="ru-ru/administration/">админ </a> и <a href="ru-ru/store-front/">витрины</a> части Вашего продукта.</p>
<h2>Функциональность каналов администратора</h2>
<p>Когда владелец магазина использует Ваш канал продукта, он захочет изменить параметры конфигурации канала продукта в админке, чтобы выбрать, включен ли он или нет, а также любые конкретные параметры, которые Вы делаете доступными. Как разработчику, Вам нужно будет создать страницу администратора, на которой можно редактировать канал продукта.</p>
<p>Все файлы администратора находятся в папке admin/. Вы найдете четыре папки в папке admin/:</p>
<ol>
  <li>controller</li>
  <li>view</li>
  <li>language</li>
  <li>model</li>
</ol>
<p>Для всех каналов продукта требуется по крайней мере один файл в каждой из папок вида и контроллера. Для некоторых потребуется файл в каждой из папок модели и языка. Обычно файлы имеют одинаковое имя, за исключением того, что файл представления имеет другой суффикс (.tpl или .twig). Мы пройдемся по этим файлам один за другим.</p>
<h3>Контроллер</h3>
<p>Первый файл, который Вы создадите, будет контроллером страницы интерфейса администратора Вашего продукта. OpenCart автоматически идентифицирует существующие каналы товаров, просто прочитав папку admin/controller/feeds Вашего магазина. Любые файлы каналов товаров, существующие в этой папке, будут автоматически отображаться на странице <a href="ru-ru/extension/feed/">Каналов Продукта</a>, и на странице <a href="ru-ru/system/user/">Пользовательские разрешения</a>. Вы можете вызвать файл вашего контроллера my_feed.php.</p>
<p>Файл контроллера будет иметь функцию, определенную как public function index(). Это общедоступный &#39;page&#39;, который будет показан, когда нажата <a href="ru-ru/extension/module/edit/">Кнопка Редактирования</a>, и где форма просмотра будет представлена. Представленные данные будут обработаны в этой функции и сохранены в `settings` таблицы базы данных через объект конфигурации контроллера.</p>
<p>Вы также можете иметь функцию, определенную как public function install(). Эта функция будет срабатывать при нажатии на ссылку установки на странице <a href="ru-ru/extension/module/">Расширения &gt; каналы</a>. Точно так же функция определяется как public function uninstall() будет срабатывать при нажатии на ссылку удаления. Вы можете использовать эти функции для создания и удаления любых структур (таких как таблицы базы данных или настройки конфигурации), требуемых Вашим каналом. Хорошей практикой является создание функции удаления для очистки любых изменений, внесенных Вашим каналом.</p>
<h3>Представление</h3>
<p>Второй необходимый файл для интерфейса администратора Вашего канала - это файл представления. Это будет создано в папке admin/view/template/feed, и будет иметь суффикс .tpl (.twig). Это стандарт для файлов просмотра OpenCart. В этом файле Вы создадите форму для пользователя, чтобы заполнить и отправить. Он будет отправлен в функцию индекса контроллера. Самый простой способ создать файл представления - это скопировать и вставить существующий аналогичный файл представления и отредактировать форму, чтобы она содержала правильные поля для параметров конфигурации Вашего канала. Вы можете позвонить в Ваш файл просмотра my_feed.tpl (my_feed.twig).</p>
<h3>Язык</h3>
<p>Третий файл, который Вы обычно создаете для любого канала, - это языковые файлы. Вам понадобится один языковой файл для каждого языка, с которым Ваш канал совместим. Языковой файл будет находиться в папке admin/language/&lt;language name&gt;/feed. Он просто содержит <a href="https://php.net/manual/ru/language.types.array.php">ассоциативный массив</a> PHP вызываемый $_, который содержит внутреннее имя в качестве ключа и перевод в качестве значения. Вы можете назвать Ваш языковой файл my_feed.php, такой же, как файлы Вашего контроллера и модели.</p>
<h3>Модель</h3>
<p>Для каналов редко требуется файл модели на стороне администратора. Однако, если Ваш канал использует собственную таблицу базы данных или пользовательский запрос для создания данных определенного формата, Вы можете написать файл модели. Примером этого может быть, если Вы пишете фид счетчика посетителей, где каждый посетитель хранится в таблице базы данных со своим IP-адресом и количеством посещений. Затем Вы можете создать файл модели с функцией для определения и создания этой дополнительной таблицы в базе данных OpenCart. Файл модели будет находиться в папке admin/model/feed. Вы можете вызвать файл модели my_feed.php, такой же, как Ваш контроллер и языковые файлы.</p>
<h2>Функциональность фронтенд канала</h2>
<p>Внешний интерфейс Вашего фида следует той же схеме, что и интерфейс администратора, который только что описан. То, что Вы будете включать в каждый из Ваших файлов внешнего интерфейса, будет в значительной степени зависеть от того, что должен делать Ваш канал. Канал может обращаться к любым файлам моделей, которые уже существуют в OpenCart, Вам не нужно писать собственные запросы к базе данных, если такой же запрос уже существует. Например, модель catalog/product содержит много полезных запросов для получения продуктов. Использование этих функций модели должно быть предпочтительнее, чем изобретать велосипед.</p>
<p>Основное отличие внешнего интерфейса Вашего канала заключается в том, что Ваш файл представления будет находиться в папке catalog/view/theme/(themename)/template/feed. Это значительно более глубокая структура папок для файла представления администратора из-за тем. Магазин OpenCart может иметь много разных доступных <a href="https://www.opencart.com/index.php?route=marketplace/extension&filter_category_id=1" target="_blank">тем интерфейса</a>, но только один шаблон администратора. (themename)</p>
<p>В фронтенд части Вашего канала Вы будете иметь доступ к параметрам конфигурации, сохраненным Вашим каналом, через объект конфигурации контроллера и переменную $settings, передаваемую в функцию индекса контроллера. На основе этих настроек Вы можете управлять аспектами отображения веб-интерфейса.</p>
